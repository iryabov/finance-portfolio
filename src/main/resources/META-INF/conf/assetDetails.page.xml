<?xml version='1.0' encoding='UTF-8'?>
<page xmlns="http://n2oapp.net/framework/config/schema/page-2.0"
             name="{id}">
    <toolbar place="topLeft">
        <group>
            <button id="purchase" label="Buy" widget-id="asset"
                    color="success">
                <open-page page-id="dialNew" submit-operation-id="addDial" route="/purchase">
                    <query-param name="type" value="PURCHASE"/>
                </open-page>
            </button>
            <button id="sell" label="Sell" widget-id="asset"
                    color="danger">
                <open-page page-id="dialNew" submit-operation-id="addDial" route="/sale">
                    <query-param name="type" value="SALE"/>
                </open-page>
                <dependencies>
                    <enabling message="You do not have this asset now">quantity > 0</enabling>
                </dependencies>
            </button>
        </group>
    </toolbar>
    <regions>
        <region>
            <form id="asset" query-id="accountAsset" route="/">
                <fields>
                    <set field-label-location="left">
                        <row>
                            <output-text id="quantity"/>
                            <output-text id="marketValue"/>
                            <output-text id="marketProfit"/>
                            <output-text id="valueProfit"/>
                        </row>
                    </set>
                </fields>
                <pre-filters>
                    <eq field-id="accountId" param="account_id"/>
                    <eq field-id="id" param="asset_id"/>
                </pre-filters>
            </form>
            <table id="dials" query-id="dials" route="/dials">
                <columns>
                    <column text-field-id="active">
                        <checkbox>
                            <invoke operation-id="deactivateDial" message-on-success="false"/>
                        </checkbox>
                    </column>
                    <!--            <column text-field-id="asset.ticker"/>-->
                    <!--            <column text-field-id="asset.name"/>-->
                    <column text-field-id="dt"/>
                    <column text-field-id="type"/>
                    <column text-field-id="currency"/>
                    <column text-field-id="price"/>
                    <column text-field-id="quantity"/>
                    <column text-field-id="volume"/>
                    <column text-field-id="" width="20px">
                        <toolbar>
                            <button id="delete" icon="fa fa-trash">
                                <invoke operation-id="deleteDial" route="/delete"/>
                            </button>
                        </toolbar>
                    </column>
                </columns>
                <pre-filters>
                    <eq field-id="account.id" param="account_id"/>
                    <eq field-id="asset.ticker" param="asset_id"/>
                </pre-filters>
            </table>
        </region>
    </regions>
</page>
