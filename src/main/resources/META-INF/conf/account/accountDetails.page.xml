<?xml version='1.0' encoding='UTF-8'?>
<page xmlns="http://n2oapp.net/framework/config/schema/page-2.0"
      name="{name}">
    <toolbar place="topLeft">
        <button id="addDial" label="Add dial" widget-id="assets" model="filter"
                icon="fa fa-plus" color="primary">
            <open-page page-id="dialNew" submit-operation-id="addDial" route="/newdial"/>
        </button>
        <button id="viewDials" label="Dials history" widget-id="assets" model="filter"
                icon="fa fa-history" type="icon">
            <open-page page-id="accountDials" route="/dials"/>
        </button>
    </toolbar>
    <toolbar place="topRight">
        <button id="deleteAccount" label="Delete account" widget-id="account"
                icon="fa fa-trash" type="icon" color="danger"
                confirm="true" confirm-text="Are you sure to delete account {name}?">
            <invoke operation-id="deleteAccount" close-on-success="true"/>
        </button>
    </toolbar>
    <regions>
        <region>
            <form id="account" query-id="account" route="/">
                <fields>
                    <set field-label-location="left" field-label-align="right">
                        <row>
                            <col>
                                <output-text id="totalMarketValue" format="number 0.00"/>
                            </col>
                            <col>
                                <output-text id="totalValueProfit" class="text-success"/>
                            </col>
                            <col>
                                <output-text id="totalValueProfitPercent"/>
                            </col>
                            <col>
                                <output-text id="totalMarketProfit"/>
                            </col>
                            <col>
                                <output-text id="totalMarketProfitPercent"/>
                            </col>
                        </row>
                    </set>
                </fields>
                <pre-filters>
                    <eq field-id="id" param="account_id"/>
                </pre-filters>
            </form>
            <table id="assets" query-id="accountAsset" route="/assets" selection="none">
                <columns>
                    <column text-field-id="asset.ticker"/>
                    <column text-field-id="quantity"/>
                    <column text-field-id="marketValue"/>
                    <column text-field-id="marketProfitPercent">
                        <badge text="{marketProfit}" text-format="number 0.00" color="{marketProfitColor}"/>
                    </column>
                </columns>
                <rows>
                    <switch value-field-id="assetActive">
                        <case value="false">text-secondary</case>
                    </switch>
                    <click>
                        <open-page page-id="assetDetails" route="/:asset_id/details">
                            <path-param name="asset_id" value="{id}"/>
                        </open-page>
                    </click>
                </rows>
                <pre-filters>
                    <eq field-id="accountId" param="account_id"/>
                </pre-filters>
            </table>
        </region>
    </regions>

</page>
